var __extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},DOMController=function(){function e(){this.container=document.getElementById("canvasContainer"),this.controlCanvas=this.createCanvas("controlCanvas",200),this.body=document.getElementById("lifeBody")}return e.prototype.setupNormalMode=function(){document.getElementById("mainDiv").style.display="block",document.getElementById("copyright").style.display="block",this.body.style.overflow="auto",this.container.style.margin="1em auto",this.container.style.position="relative",this.container.style.width=e.min_screen_width+"px",this.container.style.height=e.min_screen_height+"px",this.controlCanvas.style.width=this.container.style.width,this.controlCanvas.style.height=this.container.style.height,this.fullScreen=!1,this.resize&&this.resize()},e.prototype.setupFullScreenMode=function(){document.getElementById("mainDiv").style.display="none",document.getElementById("copyright").style.display="none",this.container.style.margin="0em",window.innerWidth<e.min_screen_width||window.innerHeight<e.min_screen_height?(this.body.style.overflow="auto",this.container.style.position="static"):(this.body.style.overflow="hidden",this.container.style.position="fixed"),this.container.style.width=Math.max(window.innerWidth,e.min_screen_width)+"px",this.container.style.height=Math.max(window.innerHeight,e.min_screen_height)+"px",this.controlCanvas.style.width=this.container.style.width,this.controlCanvas.style.height=this.container.style.height,this.fullScreen=!0,this.resize&&this.resize()},e.prototype.createCanvas=function(e,t,a){var n=document.createElement("canvas");return n.style.position="absolute",n.style.display="block",n.id=e,n.style.zIndex=t+"",a?a.appendChild(n):document.getElementById("canvasContainer").appendChild(n),n},e.prototype.getWidth=function(){return parseInt(this.container.style.width)},e.prototype.getHeight=function(){return parseInt(this.container.style.height)},e}();DOMController.min_screen_width=960,DOMController.min_screen_height=786;var Mouse=function(){function e(){this.pointCount=0,this.stopCount=0,global.domController.controlCanvas.addEventListener("mousemove",this.mouseMove.bind(this),!0),global.domController.controlCanvas.addEventListener("mousedown",this.mouseDown.bind(this),!0),global.domController.controlCanvas.addEventListener("mouseup",this.mouseUp.bind(this),!0),global.domController.controlCanvas.addEventListener("mouseout",this.mouseOut.bind(this),!0),global.domController.controlCanvas.addEventListener("mouseover",this.mouseOver.bind(this),!0)}return e.prototype.update=function(){this.leftPress?++this.pointCount:this.pointCount=0,this.x==this.tempX&&this.y==this.tempY?this.stopCount++:this.stopCount=0,this.x=this.tempX,this.y=this.tempY},e.prototype.judgeEntered=function(e){return this.x>=e.x&&this.x<e.x+e.width&&this.y>=e.y&&this.y<e.y+e.height},e.prototype.mouseMove=function(e){var t=e.target.getBoundingClientRect();this.tempX=e.clientX-t.left,this.tempY=e.clientY-t.top},e.prototype.mouseDown=function(e){this.leftPress=!0},e.prototype.mouseUp=function(e){this.leftPress=!1},e.prototype.mouseOut=function(e){this.leftPress=!1,this.entered=!1},e.prototype.mouseOver=function(e){this.entered=!0},e}(),FPS=function(){function e(){this.drawing=!1,this.value=0,this.start=0,this.sampleNum=0,this.canvas=global.domController.createCanvas("fpsCanvas",100),this.canvas.width=60,this.canvas.height=30,this.context=this.canvas.getContext("2d"),this.context.font="16px 'Noto Sans Japanese'",this.context.fillStyle="rgba(255,255,255,1.0)"}return e.prototype.update=function(){if(1==global.keyboard.check(Keyboard.KEY_F)&&(this.drawing=!this.drawing),0==this.sampleNum&&(this.start=+new Date),this.sampleNum==e.sampleFract){var t=+new Date;this.value=1e3/((t-this.start)/e.sampleFract),this.sampleNum=0}else++this.sampleNum},e.prototype.draw=function(){if(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawing){this.context.beginPath();var e=Math.round(100*this.value)/100;this.context.fillText(e+"",0,18)}},e}();FPS.sampleFract=10;var ImageManager=function(){function e(){this.imageMap={}}return e.prototype.getBaseFileName=function(e){return e.slice(e.lastIndexOf("/")+1,e.lastIndexOf(".")-e.length)},e.prototype.load=function(){var t=this;e.imagePathArray.forEach(function(e){var a=document.createElement("img");a.src=e,t.imageMap[t.getBaseFileName(e)]=a})},e.prototype.checkLoadCompleted=function(){for(var e in this.imageMap){var t=this.imageMap[e];if(!t.complete&&"complete"!==t.readyState)return!1}return!0},e.prototype.getImageList=function(e){var t=this,a=[];return e.forEach(function(e){a.push(t.imageMap[e])}),a},e}();ImageManager.imagePathArray=["img/cellSize_big.png","img/cellSize_mid.png","img/cellSize_small.png","img/window_full.png","img/window_normal.png","img/menu_clear.png","img/menu_fast.png","img/menu_grid.png","img/menu_load.png","img/menu_pencil.png","img/menu_eraser.png","img/menu_random.png","img/menu_play.png","img/menu_save.png","img/menu_slow.png","img/menu_stamp.png","img/menu_stop.png","img/menu_template.png","img/menu_back.png","img/menu_pagePrev.png","img/menu_pageNext.png","img/menu_color.png","img/stamp_block.png","img/stamp_tab.png","img/stamp_boat.png","img/stamp_beehive.png","img/stamp_ship.png","img/stamp_carrier.png","img/stamp_barge.png","img/stamp_loaf.png","img/stamp_pond.png","img/stamp_mango.png","img/stamp_canoe.png","img/stamp_blinker.png","img/stamp_toad.png","img/stamp_beacon.png","img/stamp_clock1.png","img/stamp_glider.png","img/stamp_LWSS.png","img/stamp_MWSS.png","img/stamp_HWSS.png","img/stamp_flyingmachine.png","img/stamp_eater.png","img/stamp_ant.png","img/template_bakery.png","img/template_lake.png","img/template_phoenix1.png","img/template_galaxy.png","img/template_eight.png","img/template_pentadecathlon.png","img/template_pulsar.png","img/template_clock2.png","img/template_hertz.png","img/template_glasses.png","img/template_1234.png","img/template_cauldron.png","img/template_harbor.png","img/template_barberpole.png","img/template_carnival_shuttle.png","img/template_toadflipper.png","img/template_tumbler.png","img/template_fly.png","img/template_brain.png","img/template_hammerhead.png","img/template_thunderbird.png","img/template_rpento.png","img/template_switchengine.png","img/template_acorn.png","img/template_5x5.png","img/template_glidergun.png","img/template_max.png","img/template_wickstretcher1.png","img/template_ttetromino.png","img/template_apiary.png","img/template_eatloaf.png","img/template_eatglider.png","img/template_flowerofeden.png"];var Keyboard=function(){function e(){this.pressedFlagList={},this.keyCountList={};for(var e=0;e<256;++e)this.keyCountList[e]=0,this.pressedFlagList[e]=!1;document.addEventListener("keyup",this.keyUp.bind(this),!0),document.addEventListener("keydown",this.keyDown.bind(this),!0)}return e.prototype.update=function(){for(var e in this.pressedFlagList)this.pressedFlagList[e]?++this.keyCountList[e]:this.keyCountList[e]=0},e.prototype.check=function(e){return this.keyCountList[e]},e.prototype.keyUp=function(e){e||(e=window.event),this.pressedFlagList[e.keyCode]=!1},e.prototype.keyDown=function(e){e||(e=window.event),this.pressedFlagList[e.keyCode]=!0},e}();Keyboard.KEY_ARROW_LEFT=37,Keyboard.KEY_ARROW_RIGHT=39,Keyboard.KEY_SPACE=32,Keyboard.KEY_C=67,Keyboard.KEY_E=69,Keyboard.KEY_F=70,Keyboard.KEY_G=71,Keyboard.KEY_H=72,Keyboard.KEY_M=77,Keyboard.KEY_P=80,Keyboard.KEY_Q=81,Keyboard.KEY_R=82,Keyboard.KEY_S=83,Keyboard.KEY_V=86,Keyboard.KEY_W=87;var global;!function(e){}(global||(global={}));var CellMap=function(){function e(e,t){this.xNum=e,this.yNum=t,this.map=[],this.alternateMap=[],this.savedMap=null;for(var a=0;a<this.yNum;a++)this.map[a]=[],this.alternateMap[a]=[];this.randomize(),this.generation=0,this.population=0}return e.prototype.calcCell=function(e,t){for(var a=0,n=-1;n<2;++n)for(var i=-1;i<2;++i)0==i&&i==n||i+e<0||i+e>=this.xNum||n+t<0||n+t>=this.yNum||this.map[n+t][i+e]&&a++;return a<2?-1:3==a?1:a>3?-1:0},e.prototype.alternate=function(){this.population=0;for(var e=0;e<this.yNum;++e)for(var t=0;t<this.xNum;++t){var a=this.calcCell(t,e);a==-1?this.alternateMap[e][t]=!1:1==a?this.alternateMap[e][t]=!0:this.alternateMap[e][t]=this.map[e][t],this.alternateMap[e][t]&&++this.population}this.generation++;var n=this.map;this.map=this.alternateMap,this.alternateMap=n},e.prototype.clear=function(){for(var e=0;e<this.yNum;++e)for(var t=0;t<this.xNum;++t)this.map[e][t]=!1;this.generation=0,this.population=0},e.prototype.randomize=function(){this.clear();for(var e=0;e<this.yNum;++e)for(var t=0;t<this.xNum;++t){var a=Math.floor(4*Math.random());0==a?(this.map[e][t]=!0,this.population++):this.map[e][t]=!1}},e.prototype.copy=function(e,t,a){t||(t=e[0].length),a||(a=e.length);for(var n=(this.xNum,this.yNum,0);n<this.yNum;++n)for(var i=0;i<this.xNum;++i)n<a&&i<t&&e[n][i]?this.map[n][i]=!0:this.map[n][i]=!1},e.prototype.save=function(){this.alternateMap=[];for(var e=0;e<this.yNum;++e)this.alternateMap[e]=[];this.savedMap=[];for(var e=0;e<this.yNum;++e){this.savedMap[e]=[];for(var t=0;t<this.xNum;++t)this.savedMap[e][t]=this.map[e][t]}},e.prototype.load=function(){this.copy(this.savedMap)},e.prototype.canLoad=function(){return null!=this.savedMap},e.prototype.setCell=function(e,t,a){this.map[t][e]=a},e.prototype.setCellNum=function(e,t){var a=this.map,n=this.xNum,i=this.yNum;this.xNum=e,this.yNum=t,this.map=[],this.alternateMap=[];for(var l=0;l<this.yNum;++l)this.map[l]=[],this.alternateMap[l]=[];this.copy(a,n,i)},e.prototype.setTemplate=function(e,t){void 0===t&&(t=!1),this.clear();for(var a=t?0:Math.floor(this.xNum/2-e[0].length/2),n=Math.floor(this.yNum/2-e.length/2),i=0;i<e.length&&i<this.map.length;++i)for(var l=0;l<e[i].length&&l<this.map[i].length;++l)1==e[i][l]&&(this.map[n+i][a+l]=!0)},e.prototype.plantStamp=function(e,t,a){for(var n=a;n<a+e.length;++n)for(var i=t;i<t+e[0].length;++i)1==e[n-a][i-t]&&(this.map[n][i]=!0)},e}(),CanvasDrawer=function(){function e(e){this.canvas=e,this.context=this.canvas.getContext("2d"),this.x=parseInt(this.canvas.style.left),this.y=parseInt(this.canvas.style.top)}return e.prototype.changeCanvas=function(e,t,a,n){this.canvas.style.left=e+"px",this.canvas.style.top=t+"px",this.canvas.width=a,this.canvas.height=n,this.x=e,this.y=t},e}(),CanvasImageDrawer=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.drawImage=function(e,t,a,n){n&&(this.context.globalAlpha=n),this.context.drawImage(e,t,a),n&&(this.context.globalAlpha=1)},t.prototype.drawRect=function(e,t,a,n){void 0===a&&(a=!0),void 0===n&&(n=2);var i=Math.floor(e.x),l=Math.floor(e.y);a||(n%2!=0&&(i-=.5,l-=.5),i+=Math.ceil(n/2),l+=Math.ceil(n/2),e.width-=n,e.height-=n);var r="rgba("+t.r+","+t.g+","+t.b+","+t.a/255+")";a?(this.context.fillStyle=r,this.context.fillRect(i,l,Math.floor(e.width),Math.floor(e.height))):(this.context.lineWidth=n,this.context.strokeStyle=r,this.context.strokeRect(i,l,Math.floor(e.width),Math.floor(e.height)))},t.prototype.drawText=function(e,t,a,n){this.context.textAlign="left",this.context.textBaseline="top",this.context.fillStyle="rgba("+n.r+","+n.g+","+n.b+","+n.a/255+")",this.context.beginPath(),this.context.fillText(e,t,a)},t.prototype.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.getStringTextWidth=function(e){return this.context.measureText(e).width},t.prototype.setFont=function(e){this.context.font=e},t}(CanvasDrawer),CanvasBitmapDrawer=function(e){function t(t){var a=e.call(this,t)||this;return a.imageData=a.context.createImageData(a.canvas.width,a.canvas.height),a}return __extends(t,e),t.prototype.changeCanvas=function(t,a,n,i){e.prototype.changeCanvas.call(this,t,a,n,i),this.imageData=this.context.createImageData(this.canvas.width,this.canvas.height)},t.prototype.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.reflesh=function(){this.context.putImageData(this.imageData,0,0)},t.prototype.drawRect=function(e,t){for(var a=this.imageData.data,n=0;n<e.height;++n)for(var i=0;i<e.width;++i){var l=4*(e.x+i+(e.y+n)*this.canvas.width);a[l]=t.r,a[l+1]=t.g,a[l+2]=t.b,a[l+3]=t.a}},t}(CanvasDrawer),ColorMap=function(){function e(){}return e.createALLGREEN=function(e,t){for(var a=[],n=0;n<t;++n){a[n]=[];for(var i=0;i<e;++i)a[n][i]={r:0,g:200,b:0,a:255}}return a},e.createCOCKTAIL_CYAN=function(t,a){for(var n=110,i=60,l=[],r=0;r<a;++r){l[r]=[];for(var s=0;s<t;++s){var o=(s+r)/((t+a)/2);o>1&&(o=2-o);var h=Math.floor(i*o),p=n+h;l[r][s]=e.HSVtoRGB(p,90,100)}}return l},e.HSVtoRGB=function(e,t,a){for(var n=(new Array,e),i=Math.floor(2.55*t),l=Math.floor(2.55*a);n<0;)n+=360;if(n%=360,0==i)return l=Math.round(l),{r:l,g:l,b:l,a:255};i/=255;var r=Math.floor(n/60)%6,s=n/60-r,o=l*(1-i),h=l*(1-s*i),p=l*(1-(1-s)*i);switch(r){case 0:return{r:l,g:p,b:o,a:255};case 1:return{r:h,g:l,b:o,a:255};case 2:return{r:o,g:l,b:p,a:255};case 3:return{r:o,g:h,b:l,a:255};case 4:return{r:p,g:o,b:l,a:255};case 5:return{r:l,g:o,b:h,a:255}}return null},e}(),CellMapView=function(){function e(e,t){this.cellMap=e,this.cellCanvas=global.domController.createCanvas("cellCanvas",2),this.gridCanvas=global.domController.createCanvas("gridCanvas",1),this.cellCanvasDrawer=new CanvasBitmapDrawer(this.cellCanvas),this.gridCanvasDrawer=new CanvasBitmapDrawer(this.gridCanvas),this.visibleGradation=!0,this.setCellDrawProperty(t,e.xNum,e.yNum)}return e.prototype.drawCell=function(){for(var e=0;e<this.cellMap.yNum;++e)for(var t=0;t<this.cellMap.xNum;++t)this.cellMap.map[e][t]?this.cellCanvasDrawer.drawRect(this.getRect(t,e),this.cellColorMap[e][t]):this.cellCanvasDrawer.drawRect(this.getRect(t,e),{r:0,g:0,b:0,a:0});this.cellCanvasDrawer.reflesh()},e.prototype.drawDifferenceCell=function(){for(var e=0;e<this.cellMap.yNum;++e)for(var t=0;t<this.cellMap.xNum;++t)this.cellMap.map[e][t]?this.cellMap.alternateMap[e][t]||this.cellCanvasDrawer.drawRect(this.getRect(t,e),this.cellColorMap[e][t]):this.cellMap.alternateMap[e][t]&&this.cellCanvasDrawer.drawRect(this.getRect(t,e),{r:0,g:0,b:0,a:0});this.cellCanvasDrawer.reflesh()},e.prototype.drawGrid=function(){if(0!=this.cellProperty.gridWidth){for(var e=0;e<this.cellMap.yNum;++e)for(var t=0;t<this.cellMap.xNum;++t)this.gridCanvasDrawer.drawRect(this.getRect(t,e),{r:30,g:30,b:30,a:255});this.gridCanvasDrawer.reflesh()}},e.prototype.getRect=function(e,t){return{x:e*this.cellProperty.cellSize+this.cellProperty.gridWidth,y:t*this.cellProperty.cellSize+this.cellProperty.gridWidth,width:this.cellProperty.cellSize-2*this.cellProperty.gridWidth,height:this.cellProperty.cellSize-2*this.cellProperty.gridWidth}},e.prototype.setCellDrawProperty=function(e,t,a){this.cellProperty=e;var n=this.cellProperty.cellSize,i=n*t,l=n*a,r=Math.floor((global.domController.container.offsetWidth-i)/2),s=Math.floor((global.domController.container.offsetHeight-l)/2);this.cellCanvasDrawer.changeCanvas(r,s,i,l),this.gridCanvasDrawer.changeCanvas(r,s,i,l),this.visibleGradation?this.cellColorMap=ColorMap.createCOCKTAIL_CYAN(this.cellMap.xNum,this.cellMap.yNum):this.cellColorMap=ColorMap.createALLGREEN(this.cellMap.xNum,this.cellMap.yNum)},e.prototype.getVisibleGrid=function(){return this.visibleGrid},e.prototype.setVisibleGrid=function(e){this.visibleGrid=e,this.visibleGrid?this.drawGrid():this.gridCanvasDrawer.clear()},e.prototype.getVisibleGradation=function(){return this.visibleGradation},e.prototype.setVisibleGradation=function(e){this.visibleGradation=e,this.visibleGradation?this.cellColorMap=ColorMap.createCOCKTAIL_CYAN(this.cellMap.xNum,this.cellMap.yNum):this.cellColorMap=ColorMap.createALLGREEN(this.cellMap.xNum,this.cellMap.yNum),this.drawCell()},e.prototype.getCanvasRect=function(){return{x:this.cellCanvasDrawer.x,y:this.cellCanvasDrawer.y,width:this.cellCanvas.width,height:this.cellCanvas.height}},e}(),CellMapController=function(){function e(){this.alternationCount=0,this.alternationInterval=null,this.alternationSetter=new CellMapAlternationSetter(this),this.alternationSetter.setIndex(2),this.drawPropertySetter=new CellMapDrawPropertySetter(this),this.cellDrawProperty=this.drawPropertySetter.getProperty(),this.cellMap=new CellMap(Math.floor(global.domController.container.offsetWidth/this.cellDrawProperty.cellSize),Math.floor(global.domController.container.offsetHeight/this.cellDrawProperty.cellSize)),this.cellMapView=new CellMapView(this.cellMap,this.cellDrawProperty),this.cellMapView.drawCell(),this.cellMapView.setVisibleGrid(!0),this.pause=!1}return e.prototype.update=function(){this.pause||++this.alternationCount,this.alternationCount>=this.alternationInterval&&(this.cellMap.alternate(),this.cellMapView.drawDifferenceCell(),this.alternationCount=0)},e.prototype.resize=function(){var e=Math.floor(global.domController.container.offsetWidth/this.cellDrawProperty.cellSize),t=Math.floor(global.domController.container.offsetHeight/this.cellDrawProperty.cellSize);this.cellMap.setCellNum(e,t),this.cellMapView.setCellDrawProperty(this.cellDrawProperty,e,t),this.cellMapView.drawCell(),this.cellMapView.drawGrid()},e.prototype.reset=function(){this.alternationCount=0,this.cellMap.randomize(),this.cellMapView.drawCell(),this.cellMapView.drawGrid()},e.prototype.clear=function(){this.alternationCount=0,this.cellMap.clear(),this.cellMapView.drawCell()},e.prototype.randomize=function(){this.alternationCount=0,this.cellMap.randomize(),this.cellMapView.drawCell()},e.prototype.saveMap=function(){this.cellMap.save()},e.prototype.loadMap=function(){this.alternationCount=0,this.cellMap.load(),this.cellMapView.drawCell()},e.prototype.canLoadMap=function(){return this.cellMap.canLoad()},e.prototype.getPause=function(){return this.pause},e.prototype.setPause=function(e){this.pause=e,this.pause&&(this.alternationCount=0)},e.prototype.setCell=function(e,t,a){this.cellMap.setCell(e,t,a),this.cellMapView.drawCell()},e.prototype.getAlternationSetter=function(){return this.alternationSetter},e.prototype.getDrawPropertySetter=function(){return this.drawPropertySetter},e.prototype.setAlternationInterval=function(e){this.alternationInterval=e},e.prototype.getCellDrawProperty=function(){return this.cellDrawProperty},e.prototype.setCellDrawProperty=function(e){this.cellDrawProperty=e,global.domController.resize(),this.reset()},e.prototype.getVisibleGrid=function(){return this.cellMapView.getVisibleGrid()},e.prototype.setVisibleGrid=function(e){this.cellMapView.setVisibleGrid(e)},e.prototype.getVisibleGradation=function(){return this.cellMapView.getVisibleGradation()},e.prototype.setVisibleGradation=function(e){this.cellMapView.setVisibleGradation(e)},e.prototype.getCanvasRect=function(){return this.cellMapView.getCanvasRect()},e.prototype.setTemplate=function(e,t){void 0===t&&(t=!1),this.alternationCount=0,this.cellMap.setTemplate(e,t),this.cellMapView.drawCell()},e.prototype.plantStamp=function(e,t,a){this.cellMap.plantStamp(e,t,a),this.cellMapView.drawCell()},e.prototype.getXNum=function(){return this.cellMap.xNum},e.prototype.getYNum=function(){return this.cellMap.yNum},e}(),CellMapAlternationSetter=function(){function e(e){this.cellMapController=e,this.index=0}return e.prototype.getIndex=function(){return this.index},e.prototype.setIndex=function(t){this.index=t,this.cellMapController.setAlternationInterval(e.alternation_interval_list[this.index])},e.prototype.canUp=function(){return this.index<e.alternation_interval_list.length-1},e.prototype.canDown=function(){return this.index>0},e}();CellMapAlternationSetter.alternation_interval_list=[1,5,12,20,30,40];var CellMapDrawPropertySetter=function(){function e(e){this.cellMapController=e,this.index=0}return e.prototype.getProperty=function(){return e.cell_property_list[this.index]},e.prototype.getIndex=function(){return this.index},e.prototype.setIndex=function(t){this.index=t,this.cellMapController.setCellDrawProperty(e.cell_property_list[this.index])},e}();CellMapDrawPropertySetter.cell_property_list=[{cellSize:16,gridWidth:2},{cellSize:8,gridWidth:1},{cellSize:4,gridWidth:0}];var CellPlanter=function(){function e(e){this.cellMapController=e,this.guideCanvas=global.domController.createCanvas("guideCanvas",3),this.guideCanvasDrawer=new CanvasImageDrawer(this.guideCanvas);var t=this.cellMapController.getCanvasRect();this.guideCanvasDrawer.changeCanvas(t.x,t.y,t.width,t.height),this.drawingTool=0,this.stampName=null,this.stampX=null,this.stampY=null}return e.prototype.update=function(){if(!this.menuOnMouse()&&global.mouse.entered){var e=this.cellMapController.getCellDrawProperty().cellSize,t=Math.floor((global.mouse.x-this.guideCanvasDrawer.x)/e),a=Math.floor((global.mouse.y-this.guideCanvasDrawer.y)/e),n=this.cellMapController.getXNum(),i=this.cellMapController.getYNum();if(2==this.drawingTool){this.stampMap.length%2==0&&(a=Math.floor((global.mouse.y+e/2)/e)),this.stampMap[0].length%2==0&&(t=Math.floor((global.mouse.x+e/2)/e));var l=t-Math.floor(this.stampMap[0].length/2),r=a-Math.floor(this.stampMap.length/2),s=t+Math.floor((this.stampMap[0].length-1)/2),o=a+Math.floor((this.stampMap.length-1)/2);l<0&&(l=0),r<0&&(r=0),s>=n&&(l=n-this.stampMap[0].length),o>=i&&(r=i-this.stampMap.length),this.stampX=l,this.stampY=r}(1==global.mouse.pointCount||global.mouse.pointCount>1&&0==global.mouse.stopCount)&&(2==this.drawingTool?this.cellMapController.plantStamp(this.stampMap,this.stampX,this.stampY):(this.cellMapController.setCell(t,a,0==this.drawingTool),this.cellMapController.setPause(!0)))}},e.prototype.draw=function(){if(this.guideCanvasDrawer.clear(),!this.menuOnMouse()&&global.mouse.entered){var e=this.cellMapController.getCellDrawProperty().cellSize,t=Math.floor((global.mouse.x-this.guideCanvasDrawer.x)/e),a=Math.floor((global.mouse.y-this.guideCanvasDrawer.y)/e);if(2==this.drawingTool){if(null==this.stampX||null==this.stampY)return;for(var n=this.stampY;n<this.stampY+this.stampMap.length;++n)for(var i=this.stampX;i<this.stampX+this.stampMap[0].length;++i)1==this.stampMap[n-this.stampY][i-this.stampX]&&this.drawGuide(i,n,{r:0,g:255,b:255,a:255},{r:0,g:128,b:128,a:255})}else 0==this.drawingTool?this.drawGuide(t,a,{r:0,g:255,b:0,a:255},{r:0,g:128,b:0,a:255}):1==this.drawingTool&&this.drawGuide(t,a,{r:255,g:0,b:0,a:255},{r:128,g:0,b:0,a:255})}},e.prototype.drawGuide=function(e,t,a,n){var i=this.cellMapController.getCellDrawProperty(),l=i.cellSize,r=i.gridWidth;r<2?this.guideCanvasDrawer.drawRect({x:e*l+r,y:t*l+r,width:l-2*r,height:l-2*r},n):(this.guideCanvasDrawer.drawRect({x:e*l,y:t*l,width:l,height:l},a,!1,r),this.guideCanvasDrawer.drawRect({x:e*l+r,y:t*l+r,width:l-2*r,height:l-2*r},{r:0,g:0,b:0,a:150},!0,r))},e.prototype.changeCanvas=function(){var e=this.cellMapController.getCanvasRect();this.guideCanvasDrawer.changeCanvas(e.x,e.y,e.width,e.height)},e.prototype.getStampName=function(){return this.stampName},e.prototype.getDrawingTool=function(){return this.drawingTool},e.prototype.setDrawingTool=function(e,t,a){void 0===t&&(t=null),void 0===a&&(a=null),this.drawingTool=e,this.stampName=t,this.stampMap=a},e.prototype.setMenuOnMouse=function(e){this.menuOnMouse=e},e}(),MenuElement=function(){function e(e,t,a,n,i,l,r,s){this.img=e,this.x=t,this.y=a,this.width=n,this.height=i,this.status=s,this.enable=!0,this.selected=!1,this.mouseover=!1,this.update=l,this.action=r}return e.prototype.getImage=function(){return Array.isArray(this.img)?this.img[this.status]:this.img},e}(),MenuElementWithExplain=function(e){function t(t,a,n,i,l,r,s,o,h){var p=e.call(this,t,a,n,i,l,r,s,h)||this;return p.explain=o,p}return __extends(t,e),t.prototype.getExplain=function(){return Array.isArray(this.explain)?this.explain[this.status]:this.explain},t}(MenuElement),CellSizeConfigMenu=function(){function e(e,t,a){this.cellMapDrawPropertySetter=a.getDrawPropertySetter(),this.canvas=global.domController.createCanvas("cellSizeConfigMenuCanvas",4),this.canvasDrawer=new CanvasImageDrawer(this.canvas),this.createMenuElement(),this.canvasDrawer.changeCanvas(e-this.width,t,this.width,this.height)}return e.prototype.update=function(){var e=this;this.elementList.forEach(function(t){t.update(t),global.mouse.judgeEntered({x:e.canvasDrawer.x+t.x,y:e.canvasDrawer.y+t.y,width:t.width,height:t.height})?(t.mouseover=!0,1==global.mouse.pointCount&&t.action(t)):t.mouseover=!1})},e.prototype.draw=function(){var e=this;this.canvasDrawer.clear(),this.canvasDrawer.drawRect({x:0,y:0,width:this.width,height:this.height},{r:10,g:10,b:10,a:230}),this.canvasDrawer.drawRect({x:0,y:0,width:this.width,height:this.height},{r:128,g:128,b:128,a:255},!1,1),this.elementList.forEach(function(t){t.mouseover&&e.canvasDrawer.drawRect({x:t.x,y:t.y,width:t.width,height:t.height},{r:0,g:255,b:160,a:150}),t.selected&&e.canvasDrawer.drawRect({x:t.x,y:t.y,width:t.width,height:t.height},{r:0,g:250,b:160,a:255},!1,2),e.canvasDrawer.drawImage(t.getImage(),t.x+Math.floor(t.width/2-t.getImage().width/2),t.y+Math.floor(t.height/2-t.getImage().height/2))})},e.prototype.clearCanvas=function(){this.canvasDrawer.clear()},e.prototype.changeCanvas=function(e,t){this.canvasDrawer.changeCanvas(e-this.width,t,this.width,this.height),this.draw()},e.prototype.judgeEnteredMouse=function(){return global.mouse.judgeEntered({x:this.canvasDrawer.x,y:this.canvasDrawer.y,width:this.width,height:this.height})},e.prototype.createMenuElement=function(){var t=this;this.elementList=[];var a=0;e.element_imagename_list.forEach(function(n){var i=a;t.elementList.push(new MenuElement(Array.isArray(n)?global.imageManager.getImageList(n):global.imageManager.imageMap[n],e.inner_margin+(e.element_size+e.element_between_space)*a,e.inner_margin,e.element_size,e.element_size,function(e){e.selected=t.cellMapDrawPropertySetter.getIndex()==i},function(){t.cellMapDrawPropertySetter.setIndex(i)})),++a}),this.width=2*e.inner_margin+e.element_size*a+e.element_between_space*(a-1),this.height=2*e.inner_margin+e.element_size},e}();CellSizeConfigMenu.element_size=34,CellSizeConfigMenu.element_between_space=5,CellSizeConfigMenu.inner_margin=5,CellSizeConfigMenu.element_imagename_list=["cellSize_big","cellSize_mid","cellSize_small"];var WindowModeMenu=function(){function e(t,a){var n=this;this.element=new MenuElement(global.imageManager.getImageList(["window_full","window_normal"]),e.margin,e.margin,e.element_size,e.element_size,function(e){n.element.status=global.domController.fullScreen?1:0},function(e){0==e.status?global.domController.setupFullScreenMode():global.domController.setupNormalMode()},global.domController.fullScreen?1:0),this.width=e.element_size+2*e.margin,this.height=e.element_size+2*e.margin,this.canvas=global.domController.createCanvas("windowModeMenuCanvas",4),this.canvasDrawer=new CanvasImageDrawer(this.canvas),this.canvasDrawer.changeCanvas(t-this.width,a,this.width,this.height)}return e.prototype.update=function(){this.element.update(this.element),global.mouse.judgeEntered({x:this.canvasDrawer.x+this.element.x,y:this.canvasDrawer.y+this.element.y,width:this.element.width,height:this.element.height})?(this.element.mouseover=!0,1==global.mouse.pointCount&&this.element.action(this.element)):this.element.mouseover=!1},e.prototype.draw=function(){this.canvasDrawer.clear(),this.canvasDrawer.drawRect({x:0,y:0,width:this.width,height:this.height},{r:10,g:10,b:10,a:230}),this.canvasDrawer.drawRect({x:0,y:0,width:this.width,height:this.height},{r:128,g:128,b:128,a:255},!1,1),this.element.mouseover&&this.canvasDrawer.drawRect({x:this.element.x,y:this.element.y,width:this.element.width,height:this.element.height},{r:0,g:255,b:160,a:150}),this.canvasDrawer.drawImage(this.element.getImage(),this.element.x+Math.floor(this.element.width/2-this.element.getImage().width/2),this.element.y+Math.floor(this.element.height/2-this.element.getImage().height/2))},e.prototype.clearCanvas=function(){this.canvasDrawer.clear()},e.prototype.changeCanvas=function(e,t){this.canvasDrawer.changeCanvas(e-this.width,t,this.width,this.height),this.draw()},e.prototype.judgeEnteredMouse=function(){return global.mouse.judgeEntered({x:this.canvasDrawer.x,y:this.canvasDrawer.y,width:this.width,height:this.height})},e}();WindowModeMenu.element_size=34,WindowModeMenu.margin=5;var MainMenu=function(){function e(t,a){this.canvas=global.domController.createCanvas("mainMenuCanvas",4),this.canvasDrawer=new CanvasImageDrawer(this.canvas),this.canvasDrawer.changeCanvas(global.domController.getWidth()/2-e.width/2,global.domController.getHeight()-(e.height+MessageBox.height-e.line_width),e.width,e.height),this.messageBox=new MessageBox,this.topPagePanel=new TopPagePanel(t,a,this.messageBox),this.stampPanel=new ItemPanel(StampPattern.makeItemPanelElementData(),function(e,t){e.selected=t==a.getStampName()},function(e){a.setDrawingTool(2,e,StampPattern.list[e].map)},this.messageBox),this.templatePanel=new ItemPanel(TemplatePattern.makeItemPanelElementData(),function(){},function(e){t.setTemplate(TemplatePattern.list[e].map,TemplatePattern.list[e].leftAlignment)},this.messageBox),this.visiblePanel=this.topPagePanel,this.changedPanel=!1}return e.prototype.update=function(){switch(this.messageBox.setMessage("キーボードのMキーでメニューの表示/非表示を切り替えることができます。"),this.changedPanel=!0,this.visiblePanel.update(this.canvasDrawer)){case 0:this.changedPanel=!1;break;case 1:this.visiblePanel=this.topPagePanel;break;case 2:this.visiblePanel=this.stampPanel;break;case 3:this.visiblePanel=this.templatePanel}},e.prototype.draw=function(){this.changedPanel||(this.canvasDrawer.clear(),this.canvasDrawer.drawRect({x:0,y:0,width:e.width,height:e.height},{r:10,g:10,b:10,a:245}),this.canvasDrawer.drawRect({x:0,y:0,width:e.width,height:e.height},{r:128,g:128,b:128,a:255},!1,e.line_width),this.messageBox.draw(),this.visiblePanel.draw(this.canvasDrawer))},e.prototype.clearCanvas=function(){this.canvasDrawer.clear(),this.messageBox.clearCanvas()},e.prototype.changeCanvas=function(){this.canvasDrawer.changeCanvas(global.domController.getWidth()/2-e.width/2,global.domController.getHeight()-(e.height+MessageBox.height-e.line_width),e.width,e.height),this.messageBox.changeCanvas(),this.draw()},e.prototype.judgeEnteredMouse=function(){return this.messageBox.judgeEnteredMouse()||global.mouse.judgeEntered({x:this.canvasDrawer.x,y:this.canvasDrawer.y,width:e.width,height:e.height})},e}();MainMenu.line_width=2,MainMenu.width=838,MainMenu.height=76;var MessageBox=function(){function e(){this.canvas=global.domController.createCanvas("messageBoxCanvas",4),this.canvasDrawer=new CanvasImageDrawer(this.canvas),this.canvasDrawer.changeCanvas(global.domController.getWidth()/2-e.width/2,global.domController.getHeight()-e.height,e.width,e.height),this.message=""}return e.prototype.draw=function(){this.canvasDrawer.clear(),this.canvasDrawer.drawRect({x:0,y:0,width:e.width,height:e.height},{r:10,g:10,b:10,a:245}),this.canvasDrawer.drawRect({x:0,y:0,width:e.width,height:e.height},{r:128,g:128,b:128,a:255},!1,e.line_width);var t={r:255,g:255,b:255,a:255},a=6;this.canvasDrawer.setFont("17px MyFont");for(var n=0;n<this.message.length;++n){var i=this.message.charAt(n);if("#"!=i)this.canvasDrawer.drawText(i,a,8,t),a+=this.canvasDrawer.getStringTextWidth(i);else switch(++n,this.message.charAt(n)){case"c":t={r:0,g:255,b:160,a:255};break;case"w":t={r:255,g:255,b:255,a:255}}}},e.prototype.clearCanvas=function(){this.canvasDrawer.clear()},e.prototype.changeCanvas=function(){this.canvasDrawer.changeCanvas(global.domController.getWidth()/2-e.width/2,global.domController.getHeight()-e.height,e.width,e.height),this.draw()},e.prototype.setMessage=function(e){e&&(this.message=e)},e.prototype.judgeEnteredMouse=function(){return global.mouse.judgeEntered({x:this.canvasDrawer.x,y:this.canvasDrawer.y,width:e.width,height:e.height})},e}();MessageBox.element_size=60,MessageBox.line_width=2,MessageBox.width=MainMenu.width,MessageBox.height=32;var MenuManager=function(){function e(t,a){this.windowModeMenu=new WindowModeMenu(global.domController.getWidth()-e.outer_margin,e.outer_margin),
this.cellSizeConfigMenu=new CellSizeConfigMenu(global.domController.getWidth()-(this.windowModeMenu.width+e.outer_margin+e.bitween_menu),e.outer_margin,t),this.mainMenu=new MainMenu(t,a),this.visible=!0}return e.prototype.changeCanavs=function(){this.windowModeMenu.changeCanvas(global.domController.getWidth()-e.outer_margin,e.outer_margin),this.cellSizeConfigMenu.changeCanvas(global.domController.getWidth()-(this.windowModeMenu.width+e.outer_margin+e.bitween_menu),e.outer_margin),this.mainMenu.changeCanvas()},e.prototype.update=function(){this.visible&&(this.cellSizeConfigMenu.update(),this.windowModeMenu.update(),this.mainMenu.update()),1==global.keyboard.check(Keyboard.KEY_M)&&(this.visible=!this.visible,this.visible||(this.cellSizeConfigMenu.clearCanvas(),this.windowModeMenu.clearCanvas(),this.mainMenu.clearCanvas()))},e.prototype.draw=function(){this.visible&&(this.cellSizeConfigMenu.draw(),this.windowModeMenu.draw(),this.mainMenu.draw())},e.prototype.judgeMouseOnMenu=function(){return this.visible&&(this.cellSizeConfigMenu.judgeEnteredMouse()||this.windowModeMenu.judgeEnteredMouse()||this.mainMenu.judgeEnteredMouse())},e}();MenuManager.outer_margin=10,MenuManager.bitween_menu=5;var MainMenuPanel=function(){function e(){}return e}(),TopPagePanel=function(e){function t(a,n,i){var l=e.call(this)||this,r=0;return l.messageBox=i,l.elementList=[],l.verticalLineXList=[],l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_slow,r+=t.inner_margin,t.inner_margin,t.element_size,t.element_size,function(e){e.enable=a.getAlternationSetter().canUp()},function(e){var t=a.getAlternationSetter();t.canUp()&&t.setIndex(t.getIndex()+1)},"世代交代のスピードを遅くします。")),l.elementList.push(new MenuElementWithExplain(global.imageManager.getImageList(["menu_stop","menu_play"]),r+=t.element_size,t.inner_margin,t.element_size,t.element_size,function(e){e.status=a.getPause()?1:0},function(e){0==e.status?(a.setPause(!0),e.status=1):(a.setPause(!1),e.status=0)},["世代交代を停止します。","世代交代を再開します。"],0)),l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_fast,r+=t.element_size,t.inner_margin,t.element_size,t.element_size,function(e){e.enable=a.getAlternationSetter().canDown()},function(e){var t=a.getAlternationSetter();t.canDown()&&t.setIndex(t.getIndex()-1)},"世代交代のスピードを早くします。")),l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_save,r+=t.element_size,t.inner_margin,t.element_size,t.element_size,function(){},function(){a.saveMap()},"現在のマップを保存します。")),l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_load,r+=t.element_size,t.inner_margin,t.element_size,t.element_size,function(e){e.enable=a.canLoadMap()},function(){a.loadMap()},"保存したマップを復元します。")),l.verticalLineXList.push(r+=t.element_size+t.vertical_line_between_space),l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_pencil,r+=t.vertical_line_width+t.vertical_line_between_space,t.inner_margin,t.element_size,t.element_size,function(e){e.selected=0==n.getDrawingTool()},function(){n.setDrawingTool(0)},"#cペン#w：クリックした位置にセルを追加します。")),l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_eraser,r+=t.element_size,t.inner_margin,t.element_size,t.element_size,function(e){e.selected=1==n.getDrawingTool()},function(){n.setDrawingTool(1)},"#c消しゴム#w：クリックした位置のセルを削除します。")),l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_stamp,r+=t.element_size,t.inner_margin,t.element_size,t.element_size,function(e){e.selected=2==n.getDrawingTool()},function(){l.changeStatus=2},"#cスタンプ#w：一覧からパターンを選択し、クリックで配置します。")),l.verticalLineXList.push(r+=t.element_size+t.vertical_line_between_space),l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_clear,r+=t.vertical_line_width+t.vertical_line_between_space,t.inner_margin,t.element_size,t.element_size,function(){},function(){a.clear()},"すべてのセルを削除します。")),l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_random,r+=t.element_size,t.inner_margin,t.element_size,t.element_size,function(){},function(){a.randomize()},"すべてのセルを削除し、セルをランダムに配置します。")),l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_template,r+=t.element_size,t.inner_margin,t.element_size,t.element_size,function(){},function(){l.changeStatus=3},"一覧から選んだパターンを配置します。")),l.verticalLineXList.push(r+=t.element_size+t.vertical_line_between_space),l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_grid,r+=t.vertical_line_width+t.vertical_line_between_space,t.inner_margin,t.element_size,t.element_size,function(e){e.status=a.getVisibleGrid()?0:1,e.selected=0==e.status},function(e){a.setVisibleGrid(0!=e.status)},["グリッドを非表示にします。","グリッドを表示します。"],0)),l.elementList.push(new MenuElementWithExplain(global.imageManager.imageMap.menu_color,r+=t.element_size,t.inner_margin,t.element_size,t.element_size,function(e){e.status=a.getVisibleGradation()?0:1,e.selected=0==e.status},function(e){a.setVisibleGradation(0!=e.status)},["マップのグラデーションをオフにします。","マップのグラデーションをオンにします。"],0)),l}return __extends(t,e),t.prototype.update=function(e){var t=this;return this.changeStatus=0,this.elementList.forEach(function(a){a.update(a),global.mouse.judgeEntered({x:e.x+a.x,y:e.y+a.y,width:a.width,height:a.height})?(a.mouseover=!0,t.messageBox.setMessage(a.getExplain()),1==global.mouse.pointCount&&a.action(a)):a.mouseover=!1}),this.changeStatus},t.prototype.draw=function(e){this.elementList.forEach(function(a){t.drawElement(a,e,t.element_line_width)}),this.verticalLineXList.forEach(function(a){e.drawRect({x:a,y:t.vertical_line_y,width:t.vertical_line_width,height:t.vertical_line_height},{r:60,g:60,b:60,a:180})})},t.drawElement=function(e,t,a){e.enable&&e.mouseover&&(t.drawRect({x:e.x,y:e.y,width:e.width,height:e.height},{r:0,g:63,b:63,a:204}),t.drawRect({x:e.x,y:e.y,width:e.width,height:e.height},{r:0,g:255,b:160,a:255},!1,a)),e.enable&&!e.mouseover&&e.selected&&(t.drawRect({x:e.x+1,y:e.y+1,width:e.width-2,height:e.height-2},{r:0,g:100,b:255,a:255},!1,2),t.drawRect({x:e.x+5,y:e.y+5,width:e.width-10,height:e.height-10},{r:0,g:60,b:153,a:255},!1,2));var n=e.getImage();t.drawImage(n,e.x+Math.floor(e.width/2-n.width/2),e.y+Math.floor(e.height/2-n.height/2),e.enable?null:.5)},t}(MainMenuPanel);TopPagePanel.element_size=60,TopPagePanel.element_line_width=2,TopPagePanel.inner_margin=8,TopPagePanel.vertical_line_between_space=6,TopPagePanel.vertical_line_width=2,TopPagePanel.vertical_line_height=48,TopPagePanel.vertical_line_y=14;var ItemPanel=function(e){function t(a,n,i,l){var r=e.call(this)||this;r.elementList=[],r.changeStatus=0,r.messageBox=l;var s=0;r.backButton=new MenuElementWithExplain(global.imageManager.imageMap.menu_back,s+=t.inner_margin,t.inner_margin,t.element_size,t.element_size,function(){},function(){r.changeStatus=1},"メインメニューに戻ります。"),r.pagePrevButton=new MenuElementWithExplain(global.imageManager.imageMap.menu_pagePrev,s+=t.element_size+t.between_back_button_space,t.inner_margin,t.page_button_size,t.element_size,function(e){e.enable=0!=r.page},function(){r.page>0&&--r.page},null);var o=s+t.page_button_size+t.between_page_button_space,h=0,p=0;return a.forEach(function(e){0==p&&(r.elementList[h]=[],s=o);r.elementList[h][p]=new MenuElementWithExplain(global.imageManager.imageMap[e.name],s,t.inner_margin,t.element_size,t.element_size,function(t){n(t,e.name)},function(){i(e.name)},e.explain),s+=t.element_size+t.between_element_space,++p,p==t.page_element_max&&(++h,p=0)}),r.pageNextButton=new MenuElementWithExplain(global.imageManager.imageMap.menu_pageNext,o+(t.element_size+t.between_element_space)*t.page_element_max-t.between_element_space+t.between_page_button_space,t.inner_margin,t.page_button_size,t.element_size,function(e){e.enable=r.page<r.elementList.length-1},function(){r.page<r.elementList.length-1&&++r.page},null),r.page=0,r}return __extends(t,e),t.prototype.update=function(e){var t=this;return this.messageBox.setMessage(" "),this.changeStatus=0,this.elementList[this.page].concat([this.pageNextButton,this.pagePrevButton,this.backButton]).forEach(function(a){a.update(a),global.mouse.judgeEntered({x:e.x+a.x,y:e.y+a.y,width:a.width,height:a.height})?(a.mouseover=!0,t.messageBox.setMessage(a.getExplain()),1==global.mouse.pointCount&&a.action(a)):a.mouseover=!1}),this.changeStatus},t.prototype.draw=function(e){TopPagePanel.drawElement(this.backButton,e,t.element_line_width),t.drawPageButton(this.pagePrevButton,e),t.drawPageButton(this.pageNextButton,e),this.elementList[this.page].forEach(function(a){t.drawPageElement(a,e)})},t.drawPageButton=function(e,a){e.mouseover&&e.enable?a.drawRect({x:e.x,y:e.y,width:e.width,height:e.height},{r:64,g:32,b:0,a:204}):a.drawRect({x:e.x,y:e.y,width:e.width,height:e.height},{r:5,g:5,b:5,a:178}),e.mouseover&&e.enable?a.drawRect({x:e.x,y:e.y,width:e.width,height:e.height},{r:255,g:128,b:0,a:255},!1,t.element_line_width):a.drawRect({x:e.x,y:e.y,width:e.width,height:e.height},{r:128,g:128,b:128,a:255},!1,t.element_line_width);var n=e.getImage();a.drawImage(e.getImage(),e.x+Math.floor(e.width/2-n.width/2),e.y+Math.floor(e.height/2-n.height/2)),e.enable||a.drawRect({x:e.x,y:e.y,width:e.width,height:e.height},{r:0,g:0,b:0,a:128})},t.drawPageElement=function(e,a){e.mouseover?a.drawRect({x:e.x,y:e.y,width:e.width,height:e.height},{r:0,g:16,b:16,a:255}):a.drawRect({x:e.x,y:e.y,width:e.width,height:e.height},{r:5,g:5,b:5,a:180}),e.mouseover?a.drawRect({x:e.x,y:e.y,width:e.width,height:e.height},{r:0,g:255,b:160,a:255},!1,t.element_line_width):e.selected?(a.drawRect({x:e.x,y:e.y,width:e.width,height:e.height},{r:0,g:100,b:255,a:255},!1,2),a.drawRect({x:e.x+4,y:e.y+4,width:e.width-8,height:e.height-8},{r:0,g:60,b:153,a:255},!1,2)):a.drawRect({x:e.x+t.element_padding,y:e.y+t.element_padding,width:e.width-2*t.element_padding,height:e.height-2*t.element_padding},{r:64,g:64,b:64,a:255},!1,t.element_line_width);var n=e.getImage();a.drawImage(e.getImage(),e.x+Math.floor(e.width/2-n.width/2),e.y+Math.floor(e.height/2-n.height/2))},t}(MainMenuPanel);ItemPanel.element_size=60,ItemPanel.element_padding=3,ItemPanel.page_button_size=27,ItemPanel.between_element_space=3,ItemPanel.between_page_button_space=6,ItemPanel.between_back_button_space=6,ItemPanel.element_line_width=2,ItemPanel.inner_margin=8,ItemPanel.page_element_max=11;var TemplatePattern=function(){function e(){}return e.makeItemPanelElementData=function(){var t=[];for(var a in e.list)t.push({name:a,explain:e.list[a].explain});return t},e}();TemplatePattern.list={template_lake:{map:[[0,0,0,0,1,1,0,0,0,0],[0,0,0,1,0,0,1,0,0,0],[0,0,0,1,0,0,1,0,0,0],[0,1,1,0,1,1,0,1,1,0],[1,0,0,1,0,0,1,0,0,1],[1,0,0,1,0,0,1,0,0,1],[0,1,1,0,1,1,0,1,1,0],[0,0,0,1,0,0,1,0,0,0],[0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,0,0,0,0]],explain:"#c湖 [Lake]#w：固定物体の#c池#wが集まったもの。法則さえ守ればいくらでも大きくできる。",leftAlignment:!1},template_bakery:{map:[[0,0,0,0,1,1,0,0,0,0],[0,0,0,1,0,0,1,0,0,0],[0,0,0,1,0,1,0,0,0,0],[0,1,1,0,1,0,0,0,1,0],[1,0,0,1,0,0,0,1,0,1],[1,0,1,0,0,0,1,0,0,1],[0,1,0,0,0,1,0,1,1,0],[0,0,0,0,1,0,1,0,0,0],[0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,0,0,0,0]],explain:"#cベーカリー [Bakery]#w：固定物体の#cパン#wが集まったもの。法則さえ守ればいくらでも長くできる。",leftAlignment:!1},template_phoenix1:{map:[[0,0,0,1,0,0,0,0],[0,0,0,1,0,1,0,0],[0,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,0],[0,0,1,0,1,0,0,0],[0,0,0,0,1,0,0,0]],explain:"#cフェニックス1 [Phoenix1]#w：周期2の振動子。フェニックスと呼ばれるパターンのうち、最小のもの。",leftAlignment:!1},template_galaxy:{map:[[1,1,0,1,1,1,1,1,1],[1,1,0,1,1,1,1,1,1],[1,1,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,1,1],[1,1,1,1,1,1,0,1,1],[1,1,1,1,1,1,0,1,1]],explain:"#c銀河 [Galaxy]#w：周期8の振動子。",leftAlignment:!1},template_eight:{map:[[1,1,1,0,0,0],[1,1,1,0,0,0],[1,1,1,0,0,0],[0,0,0,1,1,1],[0,0,0,1,1,1],[0,0,0,1,1,1]],explain:"#c八の字 [Figure eight]#w：周期8の振動子。アラビア数字の8。",leftAlignment:!1},template_pentadecathlon:{map:[[0,0,1,0,0,0,0,1,0,0],[1,1,0,1,1,1,1,0,1,1],[0,0,1,0,0,0,0,1,0,0]],explain:"#cペンタデカスロン [Pentadecathlon]#w：周期15の振動子。ペンタデカスロンとは、15種目競技のこと。",leftAlignment:!1},template_pulsar:{map:[[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,0,0,1,1,0,1,1,0,0,1,1,1],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,0,0,1,1,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,1,1,0,0,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[1,1,1,0,0,1,1,0,1,1,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0]],explain:"#cパルサー [Pulsar]#w：周期3の振動子。パルサーとは、電磁波を放射する天体のこと。",leftAlignment:!1},template_clock2:{map:[[0,0,0,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,0,0,0,0],[1,1,0,1,0,0,0,0,1,0,0,0],[1,1,0,1,0,0,1,0,1,0,0,0],[0,0,0,1,0,0,1,0,1,0,1,1],[0,0,0,1,0,1,0,0,1,0,1,1],[0,0,0,0,1,1,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0,0]],explain:"#c時計2 [Clock2]#w：周期4の振動子。",leftAlignment:!1},template_hertz:{map:[[0,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,1,1,1,1,0,0,0,1,1],[1,0,1,0,1,0,0,0,0,1,0,1,0,1],[0,0,1,0,1,1,0,0,0,1,0,1,0,0],[1,0,1,0,1,0,0,0,0,1,0,1,0,1],[1,1,0,0,0,1,1,1,1,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,0,0,0,0,0]],explain:"#cヘルツ発振器 [Hertz oscillator]#w：周期8の振動子。ヘルツ発振器の説明をするには、余白が狭すぎる。",leftAlignment:!1},template_glasses:{map:[[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,0],[1,1,0,1,0,0,0,1,0,0,1,0,0,0,1,0,1,1],[0,0,0,1,0,0,0,1,1,1,1,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,0],[0,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,0],[0,0,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,0]],explain:"#cめがね [Glasses]#w：周期2の振動子。",leftAlignment:!1},template_1234:{map:[[0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,1,0,0,0,0],[0,0,0,1,0,1,0,1,0,0,0],[0,0,0,1,0,0,0,1,0,0,0],[1,1,0,1,0,1,0,1,0,1,1],[1,0,1,0,0,0,0,0,1,0,1],[0,0,0,1,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,1,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,0]],explain:"#c1-2-3-4 [1-2-3-4]#w：周期4の振動子。真ん中のセルの個数が、1、2、3、4と変わっていく。",leftAlignment:!1},template_cauldron:{map:[[0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,1,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,1,0,0,0],[1,0,1,0,0,0,0,0,1,0,1],[1,1,0,1,0,0,0,1,0,1,1],[0,0,0,1,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,1,0,0,0],[0,0,0,0,1,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,1,0,0,0],[0,0,0,0,1,0,1,1,0,0,0]],explain:"#c大釜 [Cauldron]#w：周期8の振動子。",leftAlignment:!1},template_harbor:{map:[[0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0],[1,1,0,0,1,0,1,0,0,0,1,0,1,0,0,1,1],[1,0,1,0,1,1,0,0,0,0,0,1,1,0,1,0,1],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[1,0,1,0,1,1,0,0,0,0,0,1,1,0,1,0,1],[1,1,0,0,1,0,1,0,0,0,1,0,1,0,0,1,1],[0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0]],explain:"#c港 [Harbor]#w：周期5の振動子。#cボート#wと#c船#wのみで構成されている。",leftAlignment:!1},template_barberpole:{map:[[0,0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0,0,0]],explain:"#cサインポール [Barber pole]#w：周期2の振動子。法則さえ守れば、斜めにいくらでも長くできる。",leftAlignment:!1},template_carnival_shuttle:{map:[[1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1],[0,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,0,0,0,0,0,0,1,0,0,1,0,0,0,1,0,1,0,1,0],[0,1,0,1,0,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0],[0,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,0,0,0,0,0,0,1,0,0,1,0,0,0,1,0,1,0,1,0],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1],[1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],explain:"#cカーニバルシャトル [Carnival shuttle]#w：周期12の振動子。",leftAlignment:!1},template_toadflipper:{map:[[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0],[1,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0]],explain:"#cカエルの足ひれ [Toad Flippers]#w：周期60の振動子。30世代目に、真ん中のヒキガエルが反転する。",leftAlignment:!1},template_tumbler:{map:[[0,1,0,0,0,0,0,1,0],[1,0,1,0,0,0,1,0,1],[1,0,0,1,0,1,0,0,1],[0,0,1,0,0,0,1,0,0],[0,0,1,1,0,1,1,0,0]],explain:"#cタンブラー [Tumbler]#w：周期14の振動子。名前の由来は、上下逆さまな形になることから。",leftAlignment:!1},template_fly:{map:[[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0],[1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,1,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0],[0,1,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,1,1,0,0],[0,1,1,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,1,1,0,0,1,1,0,0,1,0,0,1,0,0,0,0],[0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,1,0,0,1,1,1,0,1,0,1,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,1,0,1,1,0,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,1,0,0,0,1,0,0,0,0,1,0,0,1,1,1,0,1,0,1,0,0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,1,0,0,1,1,0,0,1,1,0,0,1,0,0,1,0,0,0,0],[0,0,0,0,1,0,1,0,0,0,0,1,0,0,1,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,1,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0]],explain:"#cハエ [Fly]#w：周期3の移動物体。",leftAlignment:!1},template_brain:{map:[[0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0],[1,0,1,0,1,1,0,0,0,0,0,1,1,0,1,0,1],[1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1],[0,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0],[0,0,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0],[0,0,1,1,0,1,0,1,0,1,0,1,0,1,1,0,0],[0,0,1,1,1,0,0,1,0,1,0,0,1,1,1,0,0],[0,0,1,1,0,0,1,0,0,0,1,0,0,1,1,0,0],[0,1,0,0,0,0,1,1,0,1,1,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0]],explain:"#c脳 [Brain]#w：周期3の移動物体。上に移動する。",leftAlignment:!1},template_hammerhead:{map:[[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1],[0,1,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1],[0,0,0,1,1,0,0,0,1,1,0,1,1,0,0,1,1,0],[0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0],[0,0,0,1,1,0,0,0,1,1,0,1,1,0,0,1,1,0],[0,1,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1],[1,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0]],explain:"#cハンマーヘッド [Hammerhead]#w：周期4の移動物体。",leftAlignment:!1},template_thunderbird:{map:[[1,1,1],[0,0,0],[0,1,0],[0,1,0],[0,1,0]],explain:"#cサンダーバード [Thunderbird]#w：最大寿命243世代の長寿型。線対称に広がっていく。",leftAlignment:!1},template_rpento:{map:[[1,1,0],[0,1,1],[0,1,0]],explain:"#cRペントミノ [R-pentomino]#w：最大寿命1103世代の長寿型。Tテトロミノにひとつ足した形。",leftAlignment:!1},template_switchengine:{map:[[0,1,0,1,0,0],[1,0,0,0,0,0],[0,1,0,0,1,0],[0,0,0,1,1,1]],explain:"#cスイッチ機関車 [Switch engine]#w：最大寿命3911世代の長寿型。",leftAlignment:!1},template_acorn:{map:[[0,1,0,0,0,0,0],[0,0,0,1,0,0,0],[1,1,0,0,1,1,1]],explain:"#cどんぐり [Acorn]#w：最大寿命5206世代の長寿型。",leftAlignment:!1},template_5x5:{map:[[1,1,1,0,1],[1,0,0,0,0],[0,0,0,1,1],[0,1,1,0,1],[1,0,1,0,1]],explain:"#cPaul Callahanの5×5 [Paul Callahan's 5×5]#w：繁殖型。無限にセル数が増えていくパターン。",leftAlignment:!1},template_glidergun:{map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,0,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],explain:"#cグライダー銃 [Glider gun]#w：繁殖型。無限にグライダーを産み出し続ける。",leftAlignment:!1},template_max:{map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,0,0,1,0,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,1,0,1,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,1,1,0,0,0],[1,1,1,1,0,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,1,0,1,1,1,0,0,0],[1,0,0,0,1,1,0,1,0,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0],[1,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,1,0,0,1,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,1,1,1,1,0],[0,1,0,0,1,1,0,1,0,0,1,0,0,1,0,0,1,1,0,1,0,1,1,0,0,0,1,0],[1,0,0,0,0,0,1,1,0,0,0,1,0,1,0,1,0,0,0,1,1,0,0,0,0,0,1,0],[1,0,0,0,1,1,0,1,0,1,1,0,0,1,0,0,1,0,0,1,0,1,1,0,0,1,0,0],[1,1,1,1,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,1,0,0,1,0,1,1,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,1,0],[0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,0,1,0,1,1,0,0,0,1,0],[0,0,1,1,1,0,1,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,0,1,1,1,1,0],[0,0,1,1,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,0,1,0,1,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,1,0,0,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],explain:"#cマックス [Max]#w：繁殖型。マップが無限なら、どこまでも大きくなり続ける。",leftAlignment:!1},template_wickstretcher1:{map:[[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,1,1,1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,0,1,0,0,0,0,1,1,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,1,1,1,0,0,0,1,0,0,0,1,1,0,0,1,1,0,1],[0,1,0,1,0,0,1,0,1,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,0,1,0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,1],[1,1,0,1,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,1,1,0,0,0,0,1,1,0,1],[0,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,1,0,1,1,0,0,1,0,0,0,1,0,1,0,1,1,0,0,1,0,1,1,0,1,1,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,1,0,0,0,1,1,1,0,1,0,1,0,0,1,0,0,0,0,1,0,0,0,1,1,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,1,0,1,1,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,1,1,0,0,0,0,1,1,0,1],[0,0,0,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,0,0,1,0,0,0,0,1,1,1,0,1,0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,1,0,1,1,1,1,0,0,0,1,0,0,0,1,1,0,0,1,1,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],explain:"#cWickstretcher1#w：マップが無限なら、永遠に伸びるパターン。右側は#c蟻#wを生み出し、左側が回収する。",leftAlignment:!0},template_ttetromino:{map:[[1,1,1],[0,1,0]],explain:"#cTテトロミノ [T-Tetromino]#w：9世代後にブリンカーを4つ生み出す。良く自然発生するパターン。",leftAlignment:!1},template_apiary:{map:[[0,0,1,0,0],[0,1,0,1,0],[1,1,0,1,1],[0,1,0,1,0],[0,0,1,0,0]],explain:"#c養蜂場 [Apiary]#w：14世代後に蜂の巣を4つ生み出す。良く自然発生するパターン。",leftAlignment:!1},template_eatloaf:{map:[[0,0,1,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,0],[1,0,0,1,0,0,0,0,0],[0,1,1,0,0,1,1,0,0],[0,0,0,0,0,1,0,1,0],[0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,1]],explain:"#cパンを食べる [Eating a loaf]#w：#cパン#wを食べる#cイーター1#w。食べさせかたにコツがいる。",leftAlignment:!1},template_eatglider:{map:[[0,0,1,0,0,0,0,0],[1,0,1,0,0,0,0,0],[0,1,1,0,0,0,0,0],[0,0,0,0,1,1,0,0],[0,0,0,0,1,0,1,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,1,1]],explain:"#cグライダーを食べる [Eating a glider]#w：#cグライダー#wを食べる#cイーター1#w。いくらでも食える。",leftAlignment:!1},template_flowerofeden:{map:[[0,1,1,1,0,0,1,1,0,0,0],[0,1,1,0,1,0,1,0,1,1,1],[0,1,1,1,0,0,1,1,1,1,1],[1,0,1,0,1,0,1,0,1,0,1],[1,1,1,1,0,1,0,1,0,1,0],[0,0,0,0,1,1,1,0,0,0,0],[0,1,0,1,0,1,0,1,1,1,1],[1,0,1,0,1,0,1,0,1,0,1],[1,1,1,1,1,0,0,1,1,1,0],[1,1,1,0,1,0,1,0,1,1,0],[0,0,0,1,1,0,0,1,1,1,0]],explain:"#cエデンの花 [Flower of Eden]#w：エデンの園配置と呼ばれる、初期配置以外に出現しないパターン。",leftAlignment:!1}};var StampPattern=function(){function e(){}return e.makeItemPanelElementData=function(){var t=[];for(var a in e.list)t.push({name:a,explain:e.list[a].explain});return t},e}();StampPattern.list={stamp_block:{map:[[1,1],[1,1]],explain:"#cブロック [Block]#w：サイズ4の固定物体。最も頻繁に自然発生する。"},stamp_tab:{map:[[0,1,0],[1,0,1],[0,1,0]],explain:"#cタブ [Tab]#w：サイズ4の固定物体。単純な形だが、あまり自然発生しない。"},stamp_boat:{map:[[0,1,0],[1,0,1],[1,1,0]],explain:"#cボート [Boat]#w：サイズ5の固定物体。"},stamp_beehive:{map:[[0,1,1,0],[1,0,0,1],[0,1,1,0]],explain:"#c蜂の巣 [Beehive]#w：サイズ6の固定物体。ブロックの次に自然発生する確率が高い。"},stamp_ship:{map:[[0,1,1],[1,0,1],[1,1,0]],explain:"#c船 [Ship]#w：サイズ6の固定物体。ボートにセルをひとつ足した形。"},stamp_carrier:{map:[[0,0,1,1],[1,0,0,1],[1,1,0,0]],explain:"#c空母 [Carrier]#w：サイズ6の固定物体。分離している固定物体では最小のパターン。"},stamp_barge:{map:[[0,0,1,0],[0,1,0,1],[1,0,1,0],[0,1,0,0]],explain:"#cはしけ [Barge]#w：サイズ6の固定物体。はしけとは、貨物を積むための船のこと。"},stamp_loaf:{map:[[0,0,1,0],[0,1,0,1],[1,0,0,1],[0,1,1,0]],explain:"#cパン [Loaf]#w：サイズ7の固定物体。サイズが大きい固定物体のなかでは、わりとよく自然発生する。"},stamp_pond:{map:[[0,1,1,0],[1,0,0,1],[1,0,0,1],[0,1,1,0]],explain:"#c池 [Pond]#w：サイズ8の固定物体。これよりも大きいサイズの固定物体は、滅多に自然発生しない。"},stamp_mango:{map:[[0,0,1,1,0],[0,1,0,0,1],[1,0,0,1,0],[0,1,1,0,0]],explain:"#cマンゴー [Mango]#w：サイズ8の固定物体。"},stamp_canoe:{map:[[0,0,0,1,1],[0,0,0,0,1],[0,0,0,1,0],[1,0,1,0,0],[1,1,0,0,0]],explain:"#cカヌー [Canoe]#w：サイズ8の固定物体。ヘンな形だが、変形しない。滅多に自然発生しない。"},stamp_blinker:{map:[[1],[1],[1]],explain:"#cブリンカー [Blinker]#w：周期2の振動子。頻繁に自然発生する。"},stamp_toad:{map:[[1,0],[1,1],[1,1],[0,1]],explain:"#cひきがえる [Toad]#w：周期2の振動子。名前の由来は、ひきがえるの喉に似ている（？）ことから。"},stamp_beacon:{map:[[1,1,0,0],[1,1,0,0],[0,0,1,1],[0,0,1,1]],explain:"#cビーコン [Beacon]#w：周期2の振動子。ビーコンとは、電波を受信する機械のこと。"},stamp_clock1:{map:[[0,0,1,0],[1,0,1,0],[0,1,0,1],[0,1,0,0]],explain:"#c時計 [Clock]#w：周期2の振動子。"},stamp_glider:{map:[[0,1,0],[1,0,0],[1,1,1]],explain:"#cグライダー [Glider]#w：周期4の移動物体。斜めに向かって移動する。わりと自然発生する。"},stamp_LWSS:{map:[[0,1,0,0,1],[1,0,0,0,0],[1,0,0,0,1],[1,1,1,1,0]],explain:"#c軽量級宇宙船 [Lightweight spaceship]#w：周期4の移動物体。横に向かって移動する。"},stamp_MWSS:{map:[[0,0,0,1,0,0],[0,1,0,0,0,1],[1,0,0,0,0,0],[1,0,0,0,0,1],[1,1,1,1,1,0]],explain:"#c中量級宇宙船 [Middleweight spaceship]#w：周期4の移動物体。分離しているセルをスパークという。"},stamp_HWSS:{map:[[0,0,0,1,1,0,0],[0,1,0,0,0,0,1],[1,0,0,0,0,0,0],[1,0,0,0,0,0,1],[1,1,1,1,1,1,0]],explain:"#c重量級宇宙船 [Heavyweight spaceship]#w：周期4の移動物体。"},stamp_flyingmachine:{map:[[1,1,1,1,0,0,0,0,0],[1,0,0,0,1,0,0,0,0],[1,0,0,0,0,0,0,0,0],[0,1,0,0,1,0,0,1,1],[0,0,0,0,0,0,1,1,1],[0,1,0,0,1,0,0,1,1],[1,0,0,0,0,0,0,0,0],[1,0,0,0,1,0,0,0,0],[1,1,1,1,0,0,0,0,0]],explain:"#c飛行機械 [Flying Machine]#w：周期12の移動物体。Puffer Trainと呼ばれるパターンのひとつ。"},stamp_eater:{map:[[1,1,0,0],[1,0,1,0],[0,0,1,0],[0,0,1,1]],explain:"#cイーター1 [Eater1]#w：サイズ7のイーター。イーターとは、他のパターンを食べる固定物体のこと。"},stamp_ant:{map:[[0,0,1,1],[1,1,0,0],[1,1,0,0],[0,0,1,1]],explain:"#c蟻 [Ant]#w：特殊なパターン。正面の方向に1セル離して並べると、動いているように見える。"}};var Program=function(){function e(){var e=this;global.domController=new DOMController,global.mouse=new Mouse,global.keyboard=new Keyboard,global.imageManager=new ImageManager,global.fps=new FPS,global.domController.setupNormalMode(),global.imageManager.load(),this.cellMapController=new CellMapController,this.cellPlanter=new CellPlanter(this.cellMapController),global.domController.resize=function(){e.cellMapController.resize(),e.cellPlanter.changeCanvas(),e.menuManager.changeCanavs()};var t=null;window.addEventListener("resize",function(){global.domController.fullScreen&&(clearTimeout(t),t=setTimeout(function(){global.domController.setupFullScreenMode()},60))},!1);var a=setInterval(function(){global.imageManager.checkLoadCompleted()&&(clearInterval(a),e.menuManager=new MenuManager(e.cellMapController,e.cellPlanter),e.cellPlanter.setMenuOnMouse(e.menuManager.judgeMouseOnMenu.bind(e.menuManager)),setInterval(function(){global.fps.update(),global.mouse.update(),global.keyboard.update(),e.cellPlanter.update(),e.cellMapController.update(),e.menuManager.update(),e.cellPlanter.draw(),e.menuManager.draw(),global.fps.draw()},33))},10)}return e}(),program=new Program;